{% if message %}
<div class="message">{{ message }}</div>
{% endif %}

{% if events %}
<div class="filter-bar">
    <span>Filter:</span>
    <button hx-get="/events?filter_type=all" hx-target="#event-list" class="{% if not filter_type or filter_type == 'all' %}active{% endif %}">All</button>
    <button hx-get="/events?filter_type=icp" hx-target="#event-list" class="{% if filter_type == 'icp' %}active{% endif %}">icp</button>
    <button hx-get="/events?filter_type=rot" hx-target="#event-list" class="{% if filter_type == 'rot' %}active{% endif %}">rot</button>
    <button hx-get="/events?filter_type=ixn" hx-target="#event-list" class="{% if filter_type == 'ixn' %}active{% endif %}">ixn</button>
    <button hx-get="/events?filter_type=dip" hx-target="#event-list" class="{% if filter_type == 'dip' %}active{% endif %}">dip</button>
    <button hx-get="/events?filter_type=drt" hx-target="#event-list" class="{% if filter_type == 'drt' %}active{% endif %}">drt</button>
    <span class="filter-separator"></span>
    <input type="text"
           class="jq-filter"
           name="jq_filter"
           placeholder="jq filter: select(.s > 5)"
           value="{{ jq_filter|default('', true) }}"
           hx-get="/events"
           hx-target="#event-list"
           hx-trigger="keyup changed delay:300ms, search"
           hx-include="[name='jq_filter']">
    {% if is_witness %}
    <span class="filter-separator"></span>
    <button hx-post="/toggle-all-aids" hx-target="#main-content" hx-swap="innerHTML" class="toggle-aids {% if show_all_aids %}active{% endif %}">
        {% if show_all_aids %}Showing All AIDs{% else %}Show All AIDs{% endif %}
    </button>
    {% endif %}
</div>

<div class="content-grid">
    <div class="event-list-container">
        <div class="panel-header">Events ({{ events|length }})</div>
        <div id="event-list">
            {% include "partials/event_list.html" %}
        </div>
    </div>

    <div class="event-detail-container">
        <div class="panel-header">Event Detail</div>
        <div id="event-detail">
            {% if selected_event %}
                {% include "partials/event_detail.html" with context %}
            {% else %}
                <p class="no-selection">Select an event to view details</p>
            {% endif %}
        </div>
    </div>
</div>
{% else %}
<div class="empty-state">
    <img src="/static/kelp-forest.svg" alt="" class="empty-state-bg">
</div>
{% endif %}
